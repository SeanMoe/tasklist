<!-- index.html -->
<!doctype html>

<!-- ASSIGN OUR ANGULAR MODULE -->
<html ng-app="ahpTasks">
<head>
	<!-- META -->
	<meta charset="utf-8">
	<meta name="viewport" content="width=device-width, initial-scale=1"><!-- Optimize mobile viewport -->

	<title>AHP Tasks</title>

	<!-- SCROLLS -->
	<link rel="stylesheet" href="//netdna.bootstrapcdn.com/bootstrap/3.0.0/css/bootstrap.min.css"><!-- load bootstrap -->
    <link rel="stylesheet" href="//netdna.bootstrapcdn.com/font-awesome/4.0.0/css/font-awesome.min.css" />
	<style>
		html 					{ overflow-y:scroll; }
		body 					{ padding-top:50px; }
		#task-list 				{ margin-bottom:30px; }
	</style>

	<!-- SPELLS -->
	<script src="//ajax.googleapis.com/ajax/libs/jquery/2.0.3/jquery.min.js"></script><!-- load jquery -->
	<script src="//ajax.googleapis.com/ajax/libs/angularjs/1.2.9/angular.min.js"></script><!-- load angular -->
	<script src="/socket.io/socket.io.js"></script><!-- load socket.io -->
	<script src="core.js"></script>
	<script src="naturalSort.js"></script>
	<style type="text/css">	
		li{
			text-decoration:none;
		}
		.escalate{
			font-weight:bold;
			font-size:1.2em;
			color:red;
		}
		.complete{
			opacity:.4;
			text-decoration: line-through;
			color:green;
		}
		.user-box{
			position:relative;
			margin:0 0 30px;
			right:0;
		}
		.inner-user{
			display:block;
			margin-bottom:20px;
			border:1px solid #ddd;
			padding:10px;
			border-radius:4px;
		}
		.middle-valign{
			vertical-align:middle !important;
		}
		.completeBtn:hover, .downPriority:hover{
			color:white;
			background-color:green;
		}
		.deleteBtn:hover, .upPriority:hover{
			color:white;
			background-color:red;			
		}
		.deleteUser{
			position:absolute;
			background-color:#ddd;
			top:10px;
			left:30px;
			border:1px solid grey;
			color:black;
			width:50px;
		}	
		.atleastbig{
			min-width:300px;
		}
		.deleteUser:hover{
			color:red;
		}
	</style>
</head>
	<body ng-controller="MainController as main">
	<div class="row">
	<div class="col-lg-8 col-lg-offset-2">
	<form name="userForm" ng-controller="UserController as newUser" ng-submit="newUser.addUser(main,newUser.user)">
		<fieldset class="form-group">
			<input type="text" ng-model="newUser.user.name" class="form-control" placeholder="Name" title="Name" />
		</fieldset>
		<fieldset class="form-group">
			<input type="submit" class="btn btn-primary pull-right" value="Submit User">
		</fieldset>
	</form>
	</div>
	</div>
	<br /> 
		<header>
		<div class="row">
			<h1 class="text-center col-lg-12">AHP Tasks</h1>
			<br />
		</div>
		</header>
		<div class="row">
			<div class="col-lg-offset-2">
					<div ng-repeat="user in main.people" ng-init="main.taskConnect(user)">
					<div class="col-lg-5 user-box">
						<div class="inner-user">
							<h3 class="text-center">{{user.name}}</h3>
							<div class="pull-left deleteUser text-center" style="margin-bottom:15px;" ng-confirm-click="Are you sure you want to delete {{user.name}}?" ng-click="main.deleteUser(user,$index)"><i class="fa fa-trash-o fa-2x"></i></div>
							<h4>Tasks</h4>
							<div class="table-responsive">
							<table class="table table-condensed">
							<thead>
								<th class="col-sm-1 text-center"><i class="fa fa-check-square-o"></i></th>
								<th class="col-sm-1 text-center">Del</th>
								<th class="col-sm-7 ">Task</th>
								<th class="col-sm-1 text-center"><i class="fa fa-sort-numeric-asc fa-lg"></i></th>
								<th class="col-sm-1 text-center">Up</th>
								<th class="col-sm-1 text-center">Down</th>
							</thead>
							<tbody>
							<tr ng-hide="user.newTask.text == ''">
									<td></td>
									<td class="text-center deleteBtn middle-valign"></td>
									<td> {{user.newTask.text}}</td>
									<td class="text-center middle-valign">1</td>
									<td class="text-center upPriority middle-valign"></td>
									<td class="text-center downPriority middle-valign"></td>
							</tr>	
							<tr ng-class="{'escalate':task.priority > 10,'complete':task.complete}" ng-repeat="task in user.tasks | orderBy:natural('priority')">
							<td ng-click="main.toggleComplete(user,task)" class="completeBtn text-center middle-valign"><i ng-class="{'fa fa-check fa-lg':task.complete}"></i></td>
									<td class="text-center deleteBtn middle-valign" ng-click="main.deleteTask(user,task)"><i class="fa fa-trash-o fa-lg"></i></td>
									<td> {{task.text}}</td>
									<td class="text-center middle-valign">{{task.priority}}</td>
									<td class="text-center upPriority middle-valign" ng-click="main.upTask(user,task)"><i class="fa fa-plus fa-lg"></i></td>
									<td class="text-center downPriority middle-valign" ng-click="main.downTask(user,task)"><i class="fa fa-minus fa-lg"></i></td>
							</tr>
							</tbody>
							</table>
						</div>
							</div>
						<form name="taskForm" ng-submit="main.addTask(user,user.newTask)">
							<fieldset class="form-group">
								<input type="text" ng-model="user.newTask.text" class="form-control" placeholder="Enter a Task" title="Name">
							</fieldset>
							<fieldset class="form-group">
								<Input type="submit" class="btn btn-primary" value="Submit Task"><button type="button" class="btn btn-warning pull-right" ng-confirm-click="Are you sure you want to clear {{user.name}}'s completed tasks?" ng-click="main.clearComplete(user)">Clear Completed Tasks</button>
							</fieldset>
						</form>
						</div>
					<div ng-class="{'clearfix':$index % 2 == 1}"></div>
					</div>
				</div>
				</div>
				</div>
	</body>
</html>