<!-- index.html -->
<!doctype html>

<!-- ASSIGN OUR ANGULAR MODULE -->
<html ng-app="ahpTasks">
<head>
	<!-- META -->
	<meta charset="utf-8">
	<meta name="viewport" content="width=device-width, initial-scale=1"><!-- Optimize mobile viewport -->

	<title>AHP Tasks</title>

	<!-- SCROLLS -->
	<link rel="stylesheet" href="//netdna.bootstrapcdn.com/bootstrap/3.0.0/css/bootstrap.min.css"><!-- load bootstrap -->
    <link rel="stylesheet" href="//netdna.bootstrapcdn.com/font-awesome/4.0.0/css/font-awesome.min.css" />
	<style>
		html 					{ overflow-y:scroll; }
		body 					{ padding-top:50px; }
		#task-list 				{ margin-bottom:30px; }
	</style>

	<!-- SPELLS -->
	<script src="//ajax.googleapis.com/ajax/libs/jquery/2.0.3/jquery.min.js"></script><!-- load jquery -->
	<script src="//ajax.googleapis.com/ajax/libs/angularjs/1.2.9/angular.min.js"></script><!-- load angular -->
	<script src="/socket.io/socket.io.js"></script><!-- load socket.io -->
	<script src="core.js"></script>
	<script src="naturalSort.js"></script>
	<style type="text/css">
		body{
			width:75%;
			margin:auto;
		}
		li{
			text-decoration:none;
		}
		.fa-arrow-up{
			color:red;
		}
		.fa-arrow-down{
			color:green;
		}
		.escalate{
			font-weight:bold;
			font-size:1.2em;
			color:red;
		}
		.complete{
			text-decoration: line-through;
			font-color:grey;
		}
	</style>
</head>
<!-- SET THE CONTROLLER AND GET ALL taskS -->
	<body ng-controller="MainController as main">
	<form name="userForm" ng-controller="UserController as newUser" ng-submit="newUser.addUser(main,newUser.user)">
		<fieldset class="form-group">
			<input type="text" ng-model="newUser.user.name" class="form-control" placeholder="Name" title="Name" />
		</fieldset>
		<fieldset class="form-group">
			<input type="submit" class="btn btn-primary pull-right" value="Submit User">
		</fieldset>
	</form>
	<br /> 
		<header>
			<h1 class="text-center">AHP Tasks</h1>
		</header>
		<div class="list-group">
			<div class="list-group-item" ng-repeat="user in main.people track by user._id" ng-init="main.taskConnect(user)">
				<button class="btn btn-danger pull-right" ng-click="main.deleteUser(user,$index)">Delete User</button>
				<h3>{{user.name}}</h3>
				<ul>
					<h4>Tasks</h4>
					<div ng-repeat="task in user.tasks | orderBy:natural('priority')">
						<span ng-class="{'escalate':task.priority > 10,'complete':task.complete}">
						<input type="checkbox" ng-click="main.toggleComplete(user,task)" ng-checked="task.complete">
						<a href=""><i class="fa fa-trash-o" ng-click="main.deleteTask(user,task)"></i></a> {{task.text}}
						&nbsp;&nbsp;&nbsp;&nbsp;{{task.priority}}</span>&nbsp;&nbsp;&nbsp;&nbsp;
						<a href=""><i class="fa fa-arrow-up fa-lg" ng-click="main.upTask(user,task)"></i></a>
						<a href=""><i class="fa fa-arrow-down fa-lg" ng-click="main.downTask(user,task)"></i></a>
					</div>
					<button class="btn btn-warning pull-right" ng-click="main.clearComplete(user)">Clear Completed Tasks</button>
				</ul>
				<form name="taskForm" ng-controller="TaskController as taskCtrl" ng-submit="taskCtrl.addTask(user)" ng-init="taskCtrl.connect(user)">
					{{taskCtrl.task.text}}
					<h4>Add a task</h4>
					<fieldset class="form-group">
						<textarea ng-model="taskCtrl.task.text" class="form-control" placeholder="Carrying around a ladder" title="Name"></textarea>
					</fieldset>
					<fieldset class="form-group">
						<Input type="submit" class="btn btn-primary pull-right" value="Submit Task">
					</fieldset>
				</form>
			</div>
		</div>
	</body>
</html>